<!-- edit-Nasneen-->


{% extends 'base.html' %}
{% load static %}
{% block content %}
{% load social_share %}




<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script> -->

<style>
    .modal {
        z-index: 9999;
        overflow: scroll;
    }


    #selected-area {
        font-size: 20px;
    }

    #tr_data:hover {
        background-color: #757575;
    }

    .dropdown-item:hover {
        color: rgb(226, 149, 5);
    }



    .searchbar,
    .overview .bar {
        align-items: center;
        display: flex;
        justify-content: space-between;
        /* margin: 0 1rem; */
    }

    .searchbar .btn {
        width: 5vw;
        background-color: rgb(28, 117, 233);
        font-size: 1vw;
        color: rgb(255, 255, 255);
    }


    
</style>
<style>
    
  
    
  
    .slip-page {
      background: #ffffff;
      display: block;
      margin: 0 auto;
      position: relative;
      box-shadow: 0 0 0.5cm rgba(0, 0, 0, 0.5);
    }
  
    .slip-page[size="A4"] {
      /* width: 21cm; */
      /* height: 29.7cm; */
      overflow: hidden;
    }
  
    .equal-length-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 100%;
      /* Make the container fill the height of the column */
      margin-left: 2vh;
      margin-right: 2vh;
    }
  
    .equal-length-item {
      flex: 1;
      text-align: center;
    }
  
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      padding: 1px;
      margin: 0;
    }
  
    .store-user {
      padding-bottom: 25px;
    }
  
    .store-user p {
      margin: 0;
      font-weight: 600;
      color: #000000;
    }
  
    .store-user .address {
      font-weight: 400;
    }
  
    .store-user h5 {
      color: #22b8d1;
      font-family: 'Rajdhani', sans-serif;
    }
  
    .bb {
      border-bottom: 3px solid #ccc;
    }
  
    .top-content {
      padding-bottom: 15px;
    }
  
    .ribbon .ribbon-inner {
      text-align: center;
      color: #fff;
      top: -20px;
      left: -90px;
      width: 120px;
      padding: 3px;
  
    }
  
    .ribbon .ribbon-open {
      background-color: #268ddd;
      border-color: #1c72b4;
    }
  
    .template .ribbon .ribbon-open {
      background-color: #616263;
      border-color: #616263;
    }
  
    .top-left p {
      margin: 0;
      color: #000000;
    }
  
    .top-left .graphic-path {
      height: 40px;
      position: relative;
    }
  
    .top-left .graphic-path::before {
      content: "";
      height: 20px;
      background-color: #615c60;
      position: absolute;
      left: 15px;
      right: 0;
      top: -15px;
      z-index: 2;
    }
  
    .top-left .graphic-path::after {
      content: "";
      height: 22px;
      width: 17px;
      background: #000000;
      position: absolute;
      top: -13px;
      left: 6px;
      transform: rotate(45deg);
    }
  
    .template3 .top-left .graphic-path::before {
      background-color: #bbbbbb;
    }
  
    .template3 .top-left .graphic-path::after {
      background: #616263b3;
    }
  
    .top-left .graphic-path p {
      height: 40px;
      left: 0;
      right: 0;
      text-transform: uppercase;
      background-color: #22b8d1;
      font: 26px;
      z-index: 3;
      position: absolute;
      padding-left: 10px;
    }
  
    .template3 .top-left .graphic-path p {
      background-color: #616263;
      color: white;
    }
  
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      margin-bottom: 20px;
    }
  
    .logo img {
      max-height: 100px;
    }
  
    .company-info h2 {
      margin: 0;
      font-size: 2em;
    }
  
    .company-info p {
      margin: 0;
      line-height: 1.5;
    }
  
    .i.invoice-box {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
  
    .invoice-box h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }
  
    .invoice-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
  
    .invoice-details p,
    .client-details p {
      margin: 5px 0;
    }
  
    table {
      width: 100%;
      border-collapse: collapse;
    }
  
    th,
    td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
  
    #th {
      background-color: #f2f2f2;
      color: black;
    }
  
    .invoice-total {
      margin-top: 20px;
      text-align: right;
    }
  
    .invoice-total p {
      margin: 5px 0;
    }
  
    footer {
      background-color: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      text-align: center;
      font-size: 0.8em;
      color: #888;
      margin-top: 20px;
    }
  
    footer p {
      margin: 5px 0;
    }
  
    
    ::-webkit-scrollbar {
      display: none;
    }
  
    .saleordertable {
      border-collapse: collapse;
      /* Collapse table borders */
      border: none;
      /* Remove table border */
    }
  
    .saleordertable td {
      border: none;
      /* Remove cell borders */
      padding: 8px;
      /* Add padding for cell content */
      text-align: left;
      /* Optional: Adjust text alignment */
    }
  
    #producttable {
      border-collapse: collapse;
      /* Collapse table borders */
      border: none;
      /* Remove table border */
      color: white;
    }
  
    #producttable td {
      border: none;
      /* Remove cell borders */
      padding: 8px;
      /* Add padding for cell content */
      text-align: left;
      /* Optional: Adjust text alignment */
    }
  
    tr.clickable {
      cursor: pointer;
    }
  
  
    @media print {
  
      .unwanted,
      .sidebar,
      .sectionhtml {
        display: none !important;
      }
  
      body {
        visibility: hidden !important;
      }
  
      html {
        overflow: hidden ! important;
        visibility: hidden !important;
      }
  
  
      .printContainer {
        visibility: visible !important;
        /* Override the rule above to only show the printables*/
        z-index: 99999;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: auto;
      }
  
  
  
    }
  
    .scrollable-table {
      max-height: 80%;
      /* Maximum height for the tooltip */
      overflow-y: auto;
      /* Add vertical scrollbar when content overflows */
    }
  
    /* Style for the container */
  
  
    /* Style for table cell */
    .table-cell {
      padding: 5px;
    }
  </style>
  


<script>
    function printForm() {
        // print4 = document.getElementById('overview')
        // if (print4.style.display !== 'none'){
            var printContents = document.getElementById("overview").innerHTML;
        // }else{
        //     var printContents = document.getElementById("whatToPrint").innerHTML;
        // }
        var $printerDiv = $('<div class="printContainer" id=printContainer></div>');
        $printerDiv.html(printContents); 
        $('body').append($printerDiv).addClass("printingContent"); 
        
        window.print();
        $printerDiv.remove();
        $('body').removeClass("printingContent");
    }


    $(document).ready(function() {
        $("#overview_btn").click(function() {
            $("#template1").hide();
            $("#template2").hide();
            $("#template3").hide();
            $("#overview").show();
            $("#slip").hide();
        });
        $("#temp1").click(function() {
            $("#template1").show();
            $("#template2").hide();
            $("#template3").hide();
            $("#overview").hide();
            $("#slip").hide();
        });
        $("#temp2").click(function() {
            $("#template1").hide();
            $("#template2").show();
            $("#template3").hide();
            $("#overview").hide();
            $("#slip").hide();
        });
        $("#temp3").click(function() {
            $("#template1").hide();
            $("#template2").hide();
            $("#template3").show();
            $("#overview").hide();
            $("#slip").hide();
        });
        $("#slip_btn").click(function() {
            $("#template1").hide();
            $("#template2").hide();
            $("#template3").hide();
            $("#overview").hide();
            $("#slip").show();
        });


        
    });

</script>

<script>
    $(document).ready(function () {
        // Add event listener to the button
        $("#vendor-name").click(function () {
            var rows = $('#table tbody tr').get();
            rows.sort(function (a, b) {
                var textA = $(a).find('h5').text().toUpperCase();
                var textB = $(b).find('h5').text().toUpperCase();
                console.log(textA);
                console.log(textB);
                return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;
            });
            $.each(rows, function (index, row) {
                $('#table').children('tbody').append(row);
                console.log(row);
                console.log(index);
            });
            
        });
        var $rows = $('#table tbody tr');
    $('#search').keyup(function() {
      var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
      $rows.show().filter(function() {
        var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
        return !~text.indexOf(val);
      }).hide();
    });
    });
    
</script>
<div class="row">
    <div class="col-md-3">

        <div class="row">

            <div class="header">
                <h5>ALL VENDOR CREDIT </h5>
            </div>
            <div class="searchbar py-3">

                <input class="form-control" type="text" placeholder="Search by Name" name="search" id="search"
                    style="color: rgb(255, 255, 255);background: transparent;height: 6vh;">
                

                <a class="btn btn-outline mx-1" style="color: #fdfdfd;background-color: rgb(210, 132, 30);height: 5vh;"
                    href="{% url 'add_vendor_credits' %}"><i class="fa fa-plus"></i></a>
                <a class="btn btn-outline mr-1" style="color: #fdfdfd;background-color: rgb(210, 132, 30);height: 5vh;"
                data-bs-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false"><i class="fa fa-sort"></i></a>
                <div class="dropdown-menu ">
                    <a class="dropdown-item" href="{% url 'vendor_credits_home' %}" id="all-list">
                      <i class="fa fa-sort"></i> All
                    </a>
                    <a class="dropdown-item" href="#" id="vendor-name">
                      <i class="fa fa-sort"></i> Vendor Name
                    </a>
                    <a class="dropdown-item" href="#" id="debit-no">
                      <i class="fa fa-sort"></i> Debit note No
                    </a>
        
        
                  </div>
            </div>

            <hr>

        </div>
        <div class="row" style=" overflow-y: scroll; height: 84vh;">
            <div class="col-sm-12 col-lg-12 col-md-12">
                <div class="pt-3 ps-2 " style="height: 600px;">
                    <table class="text-white" style="width: 100%; " id="table">
                        {% for estimate in all_bills %}
                        <tbody id="table">
                            <tr id="tr_data" class="clickable-row border-bottom" style="cursor: pointer;"
                                data-href="{% url 'view_vendor_credits' estimate.id %}">
                                <td>
                                    <h5 style="color: rgb(218, 143, 5);">{{ estimate.vendor_name.split.0 }} {{ estimate.vendor_name.split.1 }}</h5>
                                    <p>{{estimate.credit_note}}</p>
                                    <p style="font-size:0.8rem">{{estimate.vendor_date}}</p>
                                </td>
                                <td><div>&#x20B9;{{estimate.total}}.00</div>
                                    <p>{{estimate.status}}</p>
                                    </td>
                                <!-- <td>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h5 style="color: rgb(218, 143, 5);">{{estimate.vendor_name}}</h5>
                                        </div>
                                        <div class="col-md-6 text-right" style="color: rgb(218, 143, 5);">
                                            &#x20B9;{{estimate.total}}.00</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <p>{{estimate.debitnote}}</p>
                                        </div>
                                        <div class="col-md-3 text-left">
                                        </div>
                                        <div class="col-md-6 text-right">
                                            <p>{{estimate.status}}</p>
                                        </div>
                                    </div>
                                    <div class="row mt-3">

                                    </div>
                                </td> -->
                            </tr>

                        </tbody>

                        {% endfor %}
                    </table>

                </div>
            </div>

        </div>

    </div>
    <div class="col-md-9">
        <div class="row">
            <div class="col-md-7">
                <a class="text-white" style="font-size: 1.5rem;">
                    <h2>{{estimate.credit_note }} </h2>
                </a>
            </div>
        </div>
        <div class="row pb-4">
            <div class="col-md-5">
                <a class="btn" style="background-color: chocolate; " id="overview_btn"><i class="fas fa-eye"></i>
                    Overview</a>
                <a href=" " class=" btn fa fa-file-alt " data-bs-toggle="dropdown" id="attachmentDropdown"
                    aria-haspopup="true" aria-expanded="false"
                    style="background-color: white; color: black; margin-right: 2vh;"> Templates
                </a>
                <div class="dropdown-menu" aria-labelledby="attachmentDropdown">
                    <a class="dropdown-item" id="temp1"><i class="fa fa-file-alt"></i> Template 1</a>

                    <a class="dropdown-item" id="temp2"><i class="fa fa-file-alt"></i>
                        Template 2</a>

                    <a class="dropdown-item" id="temp3"><i class="fa fa-file-alt"></i>
                        Template 3</a>


                </div>

            </div>
            <style>
                .grp .btn {
                    width: 3.2vw;
                }
            </style>
            <div class="col-md-7 px-0 grp" style="text-align: center;">
                {% if sale.status == "draft" %}
                <a href="" class="btn btn-outline-warning" title="Save">
                    <i class="fa fa-save" aria-hidden="true"></i>
                </a>
                {% endif %}
                <a href="{% url 'edit_vendor_credits' estimate.id %}" class=" text-dark ">
                    <button class="btn btn-outline-warning " title="Edit"><i class="fas fa-edit"></i></button>
                </a>
                <a class="text-dark" data-bs-toggle="dropdown" title="share"
                aria-haspopup="true" aria-expanded="false" role="button">
                    <button class="btn btn-outline-warning" title="Share"><i class="fas fa-share"></i></button>
                </a>
                <div class="dropdown-menu ">
                    <a class="dropdown-item" data-target="#shareBillEmail" data-toggle="modal">GMAIL</a>
                    <ul class="dropdown-item">WhatsApp</ul>
                </div>
                <a href="{% url 'delete_vendor_credits' estimate.id %}" class="  text-dark">
                    <button class="btn btn-outline-warning" title="Delete"><i class="fas fa-trash-alt"></i></button>
                </a>
                <a class="  text-dark " id="pdf_btn">
                    <button class="btn btn-outline-warning" title="Pdf"><i class="fas fa-file-pdf-o"></i></button>
                </a>
                <a class=" text-dark" id="print_btn">
                    <button class="btn btn-outline-warning  " title="Print"><i class="fas fa-print"></i>
                    </button>
                </a>
                <a class=" text-dark" data-bs-toggle="dropdown" id="commentDropdown" aria-haspopup="true"
                    aria-expanded="false">
                    <button class="btn btn-outline-warning" title="comment"><i class="fas fa-comment-dots"></i>
                    </button>
                </a>


                <div class="dropdown-menu" aria-labelledby="commentDropdown">
                    <a class="dropdown-item" style="cursor: pointer;" data-toggle="modal" data-target="#cmnts"><i
                            class="fa-solid fa fa-plus"></i>Add</a>
                    <a class="dropdown-item" style="cursor: pointer;" data-toggle="modal" data-target="#cmt_list"><i
                            class="fas fa-list"></i>&nbsp;View List</a>

                </div>
                <a class=" text-dark" data-bs-toggle="dropdown" id="attachDropdown" aria-haspopup="true"
                    aria-expanded="false" >
                    <button class="btn btn-outline-warning" title="attachment"><i class="fas fa-paperclip"></i>
                    </button>
                </a>
                <div class="dropdown-menu" aria-labelledby="attachDropdown" style="width: 15vw;">
                    {% if estimate.document %}
                    <a class="dropdown-item" style="cursor: pointer;" href="{% url 'vendor_download_doc' estimate.id %}">
                        <button class="btn btn-warning w-100"><i class="fa fa-download"></i>Download</button>
                    </a>
                    {% else %}
                    <a class="dropdown-item" style="cursor: pointer;">
                        <label for="file-input" type="button" class="btn btn-warning w-100"><i class="fa fa-upload"></i>Upload
                            <!-- <button class="btn btn-warning w-100"></button> -->

                        </label>
                                        <input id="file-input" type="file" name="file" style="display:none;"
                                        onchange="uploadFile()">
                    </a>

                    {% endif %}
                </div>
                
                <script>
                      $(document).ready(function() {
                     $("#pdf_btn").click(function() {

                        var visibleDiv = null;

                            if (document.getElementById("template1").style.display !== "none") {
                                visibleDiv = document.getElementById("template1");
                            } else if (document.getElementById("template2").style.display !== "none") {
                                visibleDiv = document.getElementById("template2");
                            } else if (document.getElementById("template3").style.display !== "none") {
                                visibleDiv = document.getElementById("template3");
                            } else if (document.getElementById("overview").style.display !== "none") {
                                visibleDiv = document.getElementById("overview");
                            }else if (document.getElementById("slip").style.display !== "none") {
                                visibleDiv = document.getElementById("slip");
                            }
                            


                            html2pdf()
                        .from(visibleDiv)
                        .save('vendor_credit' + '.pdf')
                        });

                        $("#print_btn").click(function() {
                            if (document.getElementById("template2").style.display !== "none"){
                                    var printContents = document.getElementById("template2").innerHTML;
                                }else if (document.getElementById("template3").style.display !== "none"){
                                    var printContents = document.getElementById("template3").innerHTML;
                                }else if (document.getElementById("slip").style.display !== "none"){
                                    var printContents = document.getElementById("slip").innerHTML;
                                }
                                else{
                                    var printContents = document.getElementById("template1").innerHTML;
                                }
                                var $printerDiv = $('<div class="printContainer" id=printContainer></div>');
                                $printerDiv.html(printContents); 
                                $('body').append($printerDiv).addClass("printingContent"); 
                                
                                window.print();
                                $printerDiv.remove();
                                $('body').removeClass("printingContent");
                        });

                });





                     function getCookie(name) {
                    var cookieValue = null;
                    if (document.cookie && document.cookie !== '') {
                        var cookies = document.cookie.split(';');
                        for (var i = 0; i < cookies.length; i++) {
                            var cookie = cookies[i].trim();
                            // Check if the cookie name matches the CSRF cookie name
                            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                break;
                            }
                        }
                    }
                    return cookieValue;
                }
                        function uploadFile() {
                            console.log("enter");
                    const fileInput = document.getElementById("file-input");
                    const file = fileInput.files[0];
                    const csrfToken = getCookie('csrftoken')

                    const formData = new FormData();
                    formData.append("file", file);

                    fetch("/vendor_upload_doc/{{ estimate.id }}", {
                        method: "POST",
                        headers: { 'X-CSRFToken': csrfToken },
                        body: formData
                    })
                    window.location.href = '/view_vendor_credits/{{ estimate.id }}';


                }
                </script>
                <a class="text-dark" id="slip_btn">
                    <button class="btn btn-outline-warning" title="Slip"><i class="fas fa-receipt"></i></button></a>
                    {% if estimate.status == 'Draft' %}
               <a class="  text-dark " id="convert" href="{% url 'vendor_draft_send' estimate.id %}">
                    <button class="btn btn-outline-warning" title="Send"><i class="fa fa-exchange"></i></button>
                </a>
                {% endif %}
                </div>
                
        </div>
        <!-- =============================== new overview -->
        <div class="row" id="overview"
        style="background-color: #ffddb0;  height: auto; margin-left:1px; ">

        <div class="row text-center">
          <h2 style="color: #000000;"><br>VENDOR CREDIT
            <hr>
          </h2>
        </div>
    
        
        <div class="gen-info col-6 " style="padding-left: 2rem; ">
            
            <div class="row mt-1">
                <div class="col-5"><label class="text-dark" for="">Status :</label></div>
                <div class="col-7">
                  <h4 class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.status}}</h4>
                </div>
              </div>
            
          <div class="row mt-2">
            <div class="col-5"><label class="text-dark" for="">Credit Note :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.credit_note}}</p>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-5"><label class="text-dark" for="">Reference :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.order_no}}</p>
            </div>
          </div>
          
          <div class="row mt-3">
            <div class="col-5"><label class="text-dark" for="">Vendor Date :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">
                {{estimate.vendor_date | date:"d/m/Y"}}</p>
            </div>
          </div>
          
          <div class="row mt-3">
            <div class="col-5"><label class="text-dark" for="">Source of Supply :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.source_supply}}</p>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-5"><label class="text-dark" for="">Bill Numer :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.bill_number}}</p>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-5"><label class="text-dark" for="">Payment Methode :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.payment_methode}}</p>
            </div>
          </div>
          {% if estimate.cheque != '' %}
          <div class="row mt-3">
            <div class="col-5"><label class="text-dark" for="">Cheque Number :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.cheque}}</p>
            </div>
          </div>
          {%endif%}
          {% if estimate.upi != '' %}
          <div class="row mt-3">
            <div class="col-5"><label class="text-dark" for="">UPI id :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.upi}}</p>
            </div>
          </div>
          {%endif%}
          {% if estimate.acc_no != '' %}
          <div class="row mt-3">
            <div class="col-5"><label class="text-dark" for="">Account Number :</label></div>
            <div class="col-7">
              <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.acc_no}}</p>
            </div>
          </div>
          {%endif%}
          
          
          
          
        </div>
        <div class="p-info col-6" style="height: 100%; margin-bottom: 1vh;">
          <div class="card" style="background-color: rgb(110, 61, 46); padding-left: 1rem; padding-top: 1rem;">
            <div class="row mt-1">
                <div class="col-md-6 " >
                    <h3 style="text-transform: uppercase;">{{ company.company_name }}</h3>
                    <h6>{{ company.address }}</h6>
                    <h6>{{ company.city }},{{ company.state }}</h6>
                </div>
            </div><hr>
            <div class="row text-center">
              <h4>VENDOR INFORMATION
                <hr>
              </h4>
            </div>

                
            <div class="row mt-2">
              <div class="col-5"><label for="">Vendor Name :</label></div>
              <div class="col-7">
                <p class="bold">{{ estimate.vendor_name }}</p>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-5"><label for="">Email :</label></div>
              <div class="col-7">
                <p class="bold">{{estimate.vendor_email }} </p>
              </div>
            </div>
            
            <div class="row mt-2">
              <div class="col-5"><label for="">Address :</label></div>
              <div class="col-7">
                <p class="bold">{{estimate.address }}</p>
              </div>
            </div>
            <div class="row mt-2">
                <div class="col-5"><label for="">GST Treatment :</label></div>
                <div class="col-7">
                  <p class="bold">{{estimate.gst_treatment }}</p>
                </div>
              </div>
              {% if estimate.gst_number != 'null' %}
              <div class="row mt-2">
                <div class="col-5"><label for="">GST Number :</label></div>
                <div class="col-7">
                  <p class="bold">{{estimate.gst_number }}</p>
                </div>
              </div>
              {% endif %}

            
          </div><br>
        </div>
        <div class="row"  style="padding-left: 2rem; ">
            <table class="table">
                <thead>
                    <tr>
                        <th style="color: black;font-weight: bold;text-align: center;">#</th>
                        <th style="width: 10rem;color: black;font-weight: bold;text-align: center;">Product
                        </th>
                        <th class="text-right;" style="color: black;font-weight: bold;text-align: center;">
                            HSN</th>
                        <th class="text-right;" style="color: black;font-weight: bold;text-align: center;">
                            Quantity</th>
                        <th class="text-right;" style="color: black;font-weight: bold;text-align: center;">
                            Price</th>
                        <th class="text-right;" style="color: black;font-weight: bold;text-align: center;">
                            Discount</th>

                        <th class="text-right;" style="color: black;font-weight: bold;text-align: center;">
                            Tax%</th>
                        <th class="text-right;" style="color: black;font-weight: bold;text-align: center;">
                            Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td style="color: black; text-align: center;">{{ forloop.counter}}</td>
                        <td style="width: 10rem; color: black;  text-align: center;">{{item.item }}</td>

                        
                        <td class="text-right" style="color: black; text-align: center;">
                            {{ item.hsn }}</td>
                        <td class="text-right" style="color: black; text-align: center;">
                            {{ item.quantity }}</td>
                        <td class="text-right" style="color: black; text-align: center;">
                            {{ item.rate|floatformat:1 }}</td>
                        <td class="text-right" style="color: black; text-align: center;">
                            {{ item.discount|floatformat:1 }}</td>

                        <td class="text-right" style="color: black; text-align: center;">
                            {{ item.tax }}</td>
                        <td class="text-right" style="color: black; text-align: center;">
                            {{ item.amount|floatformat:1 }}</td>
                    </tr>
                    {% endfor %}

                </tbody>
            </table>
        </div>
        <!-- <div class="row text-center"> -->
            <div class="col-6" style="padding-left: 2rem;">
                <div class="row mt-5">
                    <div class="col-5"><label class="text-dark" for="">Notes :</label></div>
                    <div class="col-7">
                      <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.note}}</p>
                    </div>
                  </div>
                  <hr>
                  <div class="row mt-5">
                    <div class="col-5"><label class="text-dark" for="">Paid :</label></div>
                    <div class="col-7">
                      <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word;">{{estimate.paid}}</p>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-5"><label class="text-dark" for="">Balance :</label></div>
                    <div class="col-7">
                      <p class="bold text-dark" style="max-width: 15rem;word-wrap: break-word; font-size: 1.2rem;">{{estimate.balance}}</p>
                    </div>
                  </div>
            
            </div>
            
        <div class="col-6 mt-3" style="height: 100%; margin-bottom: 1vh;">
            <div class="card" style="background-color: rgb(110, 61, 46); padding-left: 1rem; padding-top: 1rem;">

            
            
          <div class="row mt-3">
            <div class="col-6"><label class="" for="">Subtotal :</label></div>
            <div class="col-6">
              <p class="bold " style="font-weight:bold; max-width: 15rem;word-wrap: break-word;">{{estimate.sub_total}}</p>
            </div>
          </div>
          {% if estimate.igst != 0 %}
          <div class="row mt-2">
            <div class="col-6"><label class="" for="">IGST :</label></div>
            <div class="col-6">
              <p class="bold " style="font-weight:bold; max-width: 15rem;word-wrap: break-word;">{{estimate.igst}}</p>
            </div>
          </div>
          
          {% else %}
          <div class="row mt-2">
            <div class="col-6"><label class="" for="">CGST :</label></div>
            <div class="col-6">
              <p class="bold " style="font-weight:bold; max-width: 15rem;word-wrap: break-word;">{{estimate.cgst}}</p>
            </div>
          </div>
          
          <div class="row mt-2">
            <div class="col-6"><label class="" for="">SGST :</label></div>
            <div class="col-6">
              <p class="bold " style="font-weight:bold; max-width: 15rem;word-wrap: break-word;">{{estimate.sgst}}</p>
            </div>
          </div>
          {% endif %}
          <div class="row mt-2">
            <div class="col-6"><label class="" for="">Tax Amount :</label></div>
            <div class="col-6">
              <p class="bold " style="font-weight:bold; max-width: 15rem;word-wrap: break-word;">{{estimate.tax_amount}}</p>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-6"><label class="" for="">Shipping Charge :</label></div>
            <div class="col-6">
              <p class="bold " style="font-weight:bold; max-width: 15rem;word-wrap: break-word;">{{estimate.shipping_charge}}</p>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-6"><label class="" for="">Adjustment :</label></div>
            <div class="col-6">
              <p class="bold " style="font-weight:bold; max-width: 15rem;word-wrap: break-word;">{{estimate.adjustment}}</p>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-6"><label class="" for="">Total Amount :</label></div>
            <div class="col-6">
              <p class="bold " style="font-weight:bold; max-width: 15rem;word-wrap: break-word;">{{estimate.grand_total}}</p>
            </div>
          </div>
         
        
         
        </div>
    <!-- </div> -->
    </div>
      </div>

<!-- =============================== new template1 -->
        <div class="row  template1 whatToPrint2" id="template1" style="margin-left:1px ;display: none;">

            <section id="selected-area" style="background-color: rgb(255, 221, 176);height: auto;" class=" p-2">
            <header style="	background-color: #8b3131;border-radius: 1rem;">
                <div class="logo ">
                <img class="ml-2" width="100rem" style="border-radius: 50%;" src="{{company.profile_pic.url }}"
                    alt="Company Logo">
                </div>
                <div style="background: #8b3131;color: white;" class="company-info">
                <h2 class="text-white">{{company.company_name}}</h2>
                <p class="text-white"> {{company.address}}<br>{{company.city}}</p>
                <p> {{company.contact_number}}</p>
                <p>{{company.company_email}}</p>
                </div>
            </header>
            <div class="invoice-box">
                <h1 class="text-dark">Vendor Credit</h1>
                <div class="invoice-header">
                <div class="invoice-details text-dark">
                    <table>
                    <tr>
                        <td class="table-cell text-black" style="border: none;">Credit Note#</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.credit_note}}</td>
                    </tr>
                    <tr>
                        <td class="table-cell text-black" style="border: none;">Credit Date</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.vendor_date}}</td>
                    </tr>
                    <tr>
                        <td class="table-cell text-black" style="border: none;">Reference</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.order_no}}</td>
                    </tr>
                    <tr>
                        <td class="table-cell text-black" style="border: none;">Bill Number</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.bill_number}}</td>
                    </tr>
                    </table>
                </div>
                <div class="client-details" style="width: 50vh;">
                    <table>
                    <tr>
                        <td class="table-cell text-black" style="border: none;"><b>{{estimate.vendor_name}}</b>
                        </td>
                    </tr>
                    {% if estimate.address %}
                    <tr>
                        <td class="table-cell text-black" style="border: none;">{{estimate.address}}</td>
                    </tr>
                    {% endif %}
                    <tr>
                        <td class="table-cell text-black" style="border: none;">{{estimate.gst_treatment}}</td>
                    </tr>
                    {% if estimate.gst_number != 'null' %}
                    <tr>
                        <td class="table-cell text-black" style="border: none;">{{estimate.gst_number}}</td>
                    </tr>
                    {% endif %}
                    </table>
                </div>
                </div>

                <table>
                <thead>
                    <tr>

                    <th id="th" style="text-align: center;">Product</th>
                    <th id="th" style="text-align: center;">HSN</th>
                    <th id="th" style="text-align: center;">Quantity</th>
                    <th id="th" style="text-align: center;">Price</th>
                    <th id="th" style="text-align: center;">Discount</th>
                    <th id="th" style="text-align: center;">Tax %</th>
                    <th id="th" style="text-align: center;"> Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in items %}
                    <tr style="color: black;">
                    <td style="text-align: center;">{{i.item}}</td>
                    <td style="text-align: center;">{{i.hsn}}</td>
                    <td style="text-align: center;">{{i.quantity}}</td>
                    <td style="text-align: center;">{{i.rate}}</td>
                    <td style="text-align: center;">{{i.discount}}</td>
                    <td style="text-align: center;">{{i.tax}}</td>
                    <td style="text-align: center;">{{i.amount}}</td>
                    </tr>
                    {% endfor %}

                </tbody>
                </table><br>

                <div class="invoice-total">
                <div class="row">
                    <div class="col-6"></div>


                    <div class="col-4">
                    <table style="margin-left: 10vh;">
                        <tr>
                        <td class="table-cell text-black" style="border: none;">Subtotal</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;"><b>{{estimate.sub_total}}</b></td>
                        </tr>
                        {% if estimate.igst != '0.00' %}
                        <tr>
                        <td class="table-cell text-black" style="border: none;">IGST</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.igst}}</td>
                        </tr>
                        {% else %}
                        <tr>
                        <td class="table-cell text-black" style="border: none;">SGST</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.sgst}}</td>
                        </tr>
                        <tr>
                        <td class="table-cell text-black" style="border: none;">CGST</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.cgst}}</td>
                        </tr>
                        {% endif %}
                        <tr>
                        <td class="table-cell text-black" style="border: none;">Tax Amount</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.tax_amount}}</td>
                        </tr>
                        <tr>
                        <td class="table-cell text-black" style="border: none;">Shipping Charge</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.shipping_charge}}</td>
                        </tr>
                        <tr>
                        <td class="table-cell text-black" style="border: none;">Adjustment</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.adjustment}}</td>
                        </tr>
                        
                        <tr>
                        <td class="table-cell text-black" style="border: none;">Total</td>
                        <td class="table-cell text-black" style="border: none;">:</td>
                        <td class="table-cell text-black" style="border: none;">{{estimate.grand_total}}</td>
                        </tr>
                        <tr>
                            <td class="table-cell text-black" style="border: none;">Paid</td>
                            <td class="table-cell text-black" style="border: none;">:</td>
                            <td class="table-cell text-black" style="border: none;">{{estimate.paid}}</td>
                            </tr>
                            <tr>
                                <td class="table-cell text-black" style="border: none;">Balance</td>
                                <td class="table-cell text-black" style="border: none;">:</td>
                                <td class="table-cell text-black" style="border: none;">{{estimate.balance}}</td>
                                </tr>
                    </table>
                    </div>

                </div>

                </div>

            </div>

            <footer class="mb-5">
                <p class="text-dark">&copy; Zho Books 2023 | Info park kakkanad kochi, Ernamkulam, kerala India 12345
                | Phone: (123) 456-7890 | Email: info@zohodjango.com</p>
            </footer>
            </section>
        </div>


        <!-- =============================== new template2 -->
        <div id="template2" class="row ms-2 printTemplates template2" style="display: none;">
            <div class="my-3 page" style="background-color: rgb(255, 221, 176);" id="selected-area2">
              <div class="p-4">
                <div style="background-color: #8b3131;border-radius: 1rem;padding: 20px;">
                  <center class="h3"><b>VENDOR CREDIT</b></center>
                </div>
                <div class="row mt-5">
                  <div class="col-md-8">
                    <h4 class="text-secondary" style="font-weight: bold;">{{company.company_name }}</h4>
                    <p class="address" style="font-weight: bold;color: #000;">
                      {{company.address}}<br>
                      {{company.city}},
                      {{company.state}}<br>
                      {{company.pincode}}<br>
                      {{company.company_email}}<br>
                      {{company.contact_number}}<br>
                    </p>
                  </div>
                  <div class="col-md-4">
                    <div class="top-left">
                      <div class="graphic-path">
                        <p>Vendor Credit No. #:<b>{{estimate.credit_note}}</b></p>
                      </div>
                      <div class="mt-2">

                        <p style="color: #000;"> Date:
                          <b>{{ estimate.vendor_date | date:'d-m-Y'}}</b>
                        </p>
                        <p style="color: #000;"> Reference No:
                            <b>{{ estimate.order_no }}</b>
                          </p>
                        <p style="color: #000;">Bill Number:
                          <b>{{ estimate.bill_number }}</b>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
                <section class="top-content bb d-flex justify-content-between">
                  <div class="logo">

                  </div>

                </section>

                <section class="store-user">
                  <div class="col-12">
                    <div class="row bb pb-2 mt-3">
                      <div class="col-4 pl-0">
                        <label class="text-white bg-secondary w-100 p-1"><b>BILL
                            TO</b></label>
                        <h5 class="" style="font-weight: bold; color: #8b3131;">
                          {{estimate.vendor_name}}</h5>
                        <p class="address" style="font-weight: bold;color: #000;">
                          {{estimate.vendor_email}}
                          <br>
                          {% if estimate.address %}
                          {{estimate.address}}
                          {%endif%}
                          <br>

                          
                        </p>
                      </div>
                      <div class="col-4"></div>
                      <div class="col-4 pr-0">
                        <label class="text-white bg-secondary w-100 p-1"><b>GST Details</b></label>
                        <h5 class="" style="font-weight: bold; color: #8b3131;">
                          {{estimate.gst_treatment}}</h5>
                          {% if estimate.gst_number != 'null' %}
                        <p class="address" style="font-weight: bold;color: #000;">
                          {{ estimate.gst_number}}
                        </p>
                        {% endif %}
                      </div>
                    </div>

                  </div>
                </section>

                <section class="product-area mt-2">
                  <table class="table table-hover table-bordered table-secondary">
                    <thead>
                      <tr class="">
                        <th class="text-center" style="color:#8b3131;">Product</th>
                        <th class="text-center" style="color:#8b3131;">HSN</th>
                        <th class="text-center" style="color:#8b3131;">Quantity</th>
                        <th class="text-center" style="color:#8b3131;">Price</th>
                        <th class="text-center" style="color:#8b3131;">Discount</th>
                        <th class="text-center" style="color:#8b3131;">Tax %</th>
                        <th class="text-center" style="color:#8b3131;">Total</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for itm in items %}
                      <tr>
                        <td class="text-center" style="color:#000">{{ itm.item }}</td>
                        <td class="text-center" style="color:#000">{{ itm.hsn }}</td>
                        <td class="text-center" style="color:#000">{{ itm.quantity }}</td>
                        <td class="text-center" style="color:#000">{{ itm.rate }}</td>
                        <td class="text-center" style="color:#000">{{ itm.discount }}</td>
                        <td class="text-center" style="color:#000">{{ itm.tax }}</td>
                        <td class="text-center" style="color:#000">{{ itm.amount }}</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </section>

                <section class="balance-info">
                  <div class="row mt-3">
                    <div class="col-4">
                      <table class="table table-borderless">
                        <tbody>

                     
                          {% if estimate.customer_notes %}
                          <tr>
                            <td style="color: #000;text-align: left;">Note</td>
                            <td style="color: #000;text-align: left;">:</td>
                            <th style="color: #000;text-align: center;">{{estimate.note}}
                            </th>
                          </tr>
                          {% endif %}

                        </tbody>
                      </table>
                    </div>
                    <div class="col-2"></div>
                    <div class="col-6">
                      <table class="table table-borderless">
                        <tbody>
                          <tr>
                            <td style="color: #000;">Sub Total</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              {{estimate.sub_total}}</td>
                          </tr>
                          {% if estimate.igst != '0.00' %}
                          <tr>
                            <td style="color: #000;">IGST</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              {{estimate.igst}}</td>
                          </tr>
                          {% else %}
                          <tr>
                            <td style="color: #000;">SGST</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              {{estimate.sgst}}</td>
                          </tr>
                          <tr>
                            <td style="color: #000;">CGST</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              {{estimate.cgst}}</td>
                          </tr>
                          {% endif %}
                          <tr>
                            <td style="color: #000;">Tax Amount</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              {{estimate.tax_amount}}</td>
                          </tr>
                          <tr>
                            <td style="color: #000;">Shipping Charge</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              {{estimate.shipping_charge}}</td>
                          </tr>
                          <tr>
                            <td style="color: #000;">Adjustment</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              {{estimate.adjustment}}</td>
                          </tr>
                         
                          <tr>
                            <td style="color: #000;">Total</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              <b>{{estimate.grand_total}}</b>
                            </td>
                          </tr>
                          <tr>
                            <td style="color: #000;">Paid</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              {{estimate.paid}}</td>
                          </tr>
                         
                          <tr>
                            <td style="color: #000;">Balance</td>
                            <td style="color: #000;">:</td>
                            <td class="text-center" style="color: #000;">
                              <b>{{estimate.balance}}</b>
                            </td>
                          </tr>

                        </tbody>

                      </table>

                    </div>
                  </div>
                  <footer class="mb-5">
                    <p class="text-dark">&copy; Zho Books 2023 | Info park kakkanad kochi,
                      Ernamkulam,
                      kerala India 12345
                      | Phone: (123) 456-7890 | Email: info@zohodjango.com</p>
                  </footer>
                </section>

              </div>
            </div>
          </div>

          <!-- =============================== new template3 -->

          <div id="template3" class="row template3 ms-2" style="display: none;">
            <div class="page" size="A4" style="background-color: rgb(255, 221, 176);">
              <div class="p-4" id="selected-area3">
                <section class="top-content bb d-flex justify-content-between" style="background-color: #8b3131;">
                  <div class="logo">
                    <img src="{{company.profile_pic.url }}" alt="" class="img-fluid">
                  </div>
                  <div class="top-left">
                    <div class="graphic-path">
                      <p>Vendor Credit</p>
                    </div>
                    <div class="position-relative" style="margin-right: 5px;">
                      <p>Credit Number.
                        <span>{{estimate.credit_note}}</span>
                      </p>
                    </div>
                  </div>
                </section>

                <section class="store-user mt-5">
                  <div class="col-12">
                    <div class="row bb pb-3">
                      <div class="col-7">
                        <p>FROM,</p>
                        <h5>{{company.company_name }}</h5>
                        <p class="address "> {{company.address}}<br>
                          {{company.city}},
                          {{company.state}}<br>
                          {{company.pincode}}<br>
                        </p>

                      </div>
                      <div class="col-5">
                        <p>TO,</p>
                        <h5>{{estimate.vendor_name}}</h5>
                        <p class="address col-9" style="margin-left: 0px;">
                          {{estimate.address}} </p><br>
                        <p class="address col-9">{{estimate.gst_treatment}}</p><br>
                        {% if estimate.gst_number != 'null' %}<p class="address col-9">{{estimate.gst_number}}</p>{% endif %}


                      </div>
                    </div>
                    <div class="row extra-info pt-3">
                      <div class="col-7">
                        <p> Date:
                          <span>{{estimate.chellan_date |date:'d-m-Y'}}</span>
                        </p>
                        <p>Reference Number:
                          <span>{{estimate.order_no}}</span>
                        </p>
                        <p>Bill Number:
                            <span>{{estimate.bill_number}}</span>
                          </p>
                      </div>

                    </div>
                  </div>
                </section>

                <section class="product-area mt-4">
                  <table class=" table table-hover table-bordered " id="table1">
                    <thead>
                      <tr>
                        <td style="text-align: center; font-weight:bold; color:black ">Items</td>
                        <td style="font-weight:bold; color:black">HSN</td>
                        <td style="font-weight:bold; color:black">Quantity</td>
                        <td style="font-weight:bold; color:black">Price</td>
                        <td style="font-weight:bold; color:black">Discount</td>
                        <td style="font-weight:bold; color:black">Tax %</td>
                        <td style="font-weight:bold; color:black">Total</td>

                      </tr>
                    </thead>
                    <tbody>

                      {% for j in items %}
                      <tr>
                        <td style="color:black; text-align: center;">{{j.item}}</td>
                        <td style="color:black">{{j.hsn}}</td>
                        <td style="color:black">{{j.quantity}}</td>
                        <td style="color:black">{{j.rate}} </td>
                        <td style="color:black">{{j.discount}} </td>
                        <td style="color:black">{{j.tax}} </td>
                        <td style="color:black">{{j.amount}} </td>

                      </tr>
                      {% endfor %}
                    </tbody>
                  </table><br><br>
                </section>

                <section class="balance-info">
                  <div class="row">
                    <div class="col-6"></div>
                    <div class="col-6">
                      <table class="table table-borderless">
                        <tbody>
                          <tr>
                            <td style="color: #000;">Sub Total</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">
                              {{estimate.sub_total}}</td>
                          </tr>
                          {% if estimate.igst != '0.00' %}
                          <tr>
                            <td style="color: #000;">IGST</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">
                              {{estimate.igst}}</td>
                          </tr>
                          {% else %}
                          <tr>
                            <td style="color: #000;">SGST</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">
                              {{estimate.sgst}}</td>
                          </tr>
                          <tr>
                            <td style="color: #000;">CGST</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">
                              {{estimate.cgst}}</td>
                          </tr>
                          {% endif %}
                          <tr>
                            <td style="color: #000;">Tax Amount</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">
                              {{estimate.tax_amount}}</td>
                          </tr>
                          <tr>
                            <td style="color: #000;">Shipping Charge</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">{{estimate.shipping_charge}}</td>
                          </tr>
                          <tr>
                            <td style="color: #000;">Adjustment</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">{{estimate.adjustment}}</td>
                          </tr>
                          
                          <tr>
                            <td style="color: #000;">Total</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">
                              <b>{{estimate.grand_total}}</b>
                            </td>
                          </tr>
                          <tr>
                            <td style="color: #000;">Paid</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">{{estimate.paid}}</td>
                          </tr>
                          
                          <tr>
                            <td style="color: #000;">Balance</td>
                            <td style="color: #000;">:</td>
                            <td class="text-right" style="color: #000;">
                              <b>{{estimate.balance}}</b>
                            </td>
                          </tr>

                        </tbody>

                      </table>

                    </div>

                    <footer class="mb-5">
                      <p class="text-dark">&copy; Zho Books 2023 | Info park kakkanad kochi,
                        Ernamkulam,
                        kerala India 12345
                        | Phone: (123) 456-7890 | Email: info@zohodjango.com</p>
                    </footer>
                  </div>
                </section>

                <!-- Cart BG -->

               
              </div>
            </div>
          </div>

          <!-- =============================== new slip -->


          <div class="my-5 slip-page" size="A4" id="slip" style="display: none;">
             
                <div  style="margin: 20%;">
              
                <div class="card bg-white" style="border: 1px dotted black;padding: 20px;">
                  <div class="mt-2" style="text-align: center;padding: 15px;">
                    <div class="text-center" style="font-size: 3vh; color: black;">
                      <b>{{company.company_name}} </b>
                    </div>
                    <span style="font-size: x-small; color: black;">{{company.address}} <br>
                      {{company.city}},
                      {{company.state}}
                      {{company.pincode}} <br>
                      {{ company.contact_number }} <br>{{ company.company_email }}
                    </span>
                  </div>
                  <div class="ml-4 mt-2" style="color: black;">
                    <div class="row">
                      <div class="col-md-6 text-left">Credit note:</div>
                      <div class="col-md-5 text-right">{{estimate.credit_note}}</div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 text-left">Vendor Name:</div>
                      <div class="col-md-5 text-right">{{estimate.vendor_name}}</div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 text-left"> Date :</div>
                      <div class="col-md-5 text-right">{{estimate.vendor_date | date:'d-m-Y'}}</div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 text-left">Bill Number:</div>
                      <div class="col-md-5 text-right">{{estimate.bill_number }}</div>
                    </div>
                  </div>
                  <div><br>
                    <div class="equal-length-container" style="color: black; font-weight: bold;">
                      <div class="equal-length-item" style=" text-align: center;">
                        Product
                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:95%">
                      </div>
                      <div class="equal-length-item ml-2" style=" text-align:center;">
                        HSN
                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%;">
                      </div>
                      <div class="equal-length-item" style=" text-align: center; ">
                        Qty
                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%">
                      </div>
                      <div class="equal-length-item" style=" text-align: center; ">
                        Price
                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%">
                      </div>
                      <div class="equal-length-item" style=" text-align: center; ">
                        Discount
                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%">
                      </div>
                      <div class="equal-length-item" style=" text-align: center; ">
                        Tax
                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%">
                      </div>
                      <div class="equal-length-item" style=" text-align: center; ">
                        Total
                        <hr style="border-bottom: 1px solid black; margin-top:1vh; width:60%">
                      </div>
                    </div>
                  </div>
                  <div>
                    {% for j in items %}
                    <div class="equal-length-container"
                      style="color: black; font-size: small; word-wrap: break-word; margin-bottom: 1vh;">
                      <div class="equal-length-item" style="text-align: center; margin-left: 2px;">
                        {{j.item}}
                      </div>
                      <div class="equal-length-item" style="text-align: right;">
                        {{j.hsn}}
                      </div>
                      <div class="equal-length-item" style="text-align: center; ">
                        {{j.quantity}}
                      </div>
                      <div class="equal-length-item" style="text-align: center; ">
                        {{j.rate}}
                      </div>
                      <div class="equal-length-item" style="text-align: center; ">
                        {{j.discount}}
                      </div>
                      <div class="equal-length-item" style="text-align: center; ">
                        {{j.tax}}
                      </div>
                      <div class="equal-length-item" style="text-align: center; ">
                        {{j.amount}}
                      </div>
                    </div>
                    {% endfor %}
                  </div>

                  <div><br>
                    <div class="row ">
                      <div class="col-md-5 text-left" style=" color: black;">
                        Subtotal
                      </div>
                      <div class="col-md-6 " style="color: black;text-align: end;">
                        {{ estimate.sub_total }}
                      </div>
                    </div>
                    {% if estimate.igst != '0.00' %}
                    <div class="row ">
                      <div class="col-md-5 text-left " style=" color: black;">
                        IGST
                      </div>
                      <div class="col-md-6" style="color: black;text-align: end;">
                        {{ estimate.igst }}
                      </div>
                    </div>
                    {% else %}
                    <div class="row">
                      <div class="col-md-5 text-left" style=" color: black;">
                        CGST
                      </div>
                      <div class="col-md-6 " style="color: black;text-align: end;">
                        {{ estimate.cgst }}
                      </div>
                    </div>
                    <div class="row ">
                      <div class="col-md-5 text-left" style=" color: black;">
                        SGST
                      </div>
                      <div class="col-md-6 " style="color: black;text-align: end;">
                        {{ estimate.sgst }}
                      </div>
                    </div>
                    {% endif %}
                    <div class="row">
                      <div class="col-md-5 text-left" style=" color: black;">
                        Tax Amount
                      </div>
                      <div class="col-md-6 " style="color: black;text-align: end;">
                        {{ estimate.tax_amount }}
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-5 text-left" style=" color: black;">
                        Shipping Charge
                      </div>
                      <div class="col-md-6 " style="color: black;text-align: end;">
                        {{ estimate.shipping_charge }}
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-5 text-left" style=" color: black;">
                        Adjustment
                      </div>
                      <div class="col-md-6" style="color: black;text-align: end;">
                        {{ estimate.adjustment }}
                      </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5 text-left" style=" color: black;">
                          Paid
                        </div>
                        <div class="col-md-6" style="color: black;text-align: end;">
                          {{ estimate.paid }}
                        </div>
                      </div>
                      
                    
                    <hr class="ml-2 mr-2" style="color: black; border-bottom: 1px solid black; ">
                  </div>


                  <div class="mb-2">
                    <div class="row">
                      <div class="col-md-5 text-left ml-2"
                        style=" font-size: large; color: black; font-weight: bold;">
                        Total
                      </div>
                      <div class="col-md-6"
                        style="font-size: large; color: black; font-weight: bold;text-align: end;">
                        {{ estimate.grand_total }}
                      </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-5 text-left" style=" color: black;">
                          Balance
                        </div>
                        <div class="col-md-6" style="color: black;text-align: end;">
                          {{ estimate.balance }}
                        </div>
                      </div>
                  </div>
                </div>
            </div>
            </div>
          
        <!-- .................................................................................. -->

        
    </div>
</div>

<!-- share template -->

<div class="modal fade" id="shareBillEmail" tabindex="-1" aria-labelledby="shareBillEmailLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-dark" >
        <div class="modal-header" style="border-bottom: 1px solid #ffffff;">
          <h5 class="modal-title text-dark" id="shareBillEmailLabel">Share Debitnote Via Email</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="{% url 'email_vendor_credit' estimate.id %}" method="post" class="needs-validation" id="share_to_email_form">
            {% csrf_token %}
            <div class="form-group">
                <label for="emailIds">Email IDs</label>
                <textarea class="form-control text-dark" name="email_ids" id="emailIds" rows="3" placeholder="Multiple emails can be added by separating with a comma(,)." required></textarea>
            </div>
            <div class="form-group mt-2">
                <label for="item_unitname">Message(optional)</label>
                <textarea name="email_message" id="email_message" class="form-control text-dark" cols="" rows="4" placeholder="This message will be sent along with debitnote details."></textarea>
            </div>
            <div class="modal-footer d-flex justify-content-center" style="border-top: 1px solid #ffffff;">
                <button type="submit" id="share_with_email" class="submitShareEmailBtn w-50 text-uppercase btn btn-danger">SEND MAIL</button>
              </div>
          </form>
        </div>
        
      </div>
    </div>
</div>
<!-- ========================================= -->

<!-- comment modal -->

<div class="modal fade " id="cmnts"
    style="width: 750px; margin-left: 350px; justify-content: center; overflow: hidden;">
    <div class="modal-dialog modal-xl m-5 p-5">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
            <div class="modal-header " style="background: rgb(32, 35, 37);">
                <h5 class="m-3 text-uppercase text-light">Enter Comment</h5>
                <button type="button" class="close text-dark bg-none" data-dismiss="modal"
                    aria-label="Close">&times;</button>

            </div>
            <div class="modal-body" style="background: rgb(32, 35, 37); justify-content: center; overflow: hidden;">
                <div class="card p-0 m-0">
                    <form action="{% url 'vendor_credit_comment' estimate.id %}" method="post"
                        class="needs-validation" novalidate autocomplete="off" id="modalComment">
                        {% csrf_token %}
                        <div class="row mt-2">
                            <div class="col-md-6 mt-2">
                                <textarea class="form-control text-dark bg-light" id="comment" name="comments" required
                                    style="height: 200px; width: 520px;"></textarea>
                            </div>
                        </div>

                        <div class="row mt-5">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                                <div class="d-flex">
                                    <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                                        type="submit" >Save </button>
                                    <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4"
                                        data-dismiss="modal" aria-label="Close" >
                                        <span aria-hidden="true">Cancel</span>
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-4"></div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>



<!-- ....................................  comment list modal ................ -->

<div class="modal fade " id="cmt_list"
    style="width: 750px; margin-left: 350px; justify-content: center; overflow: hidden;">
    <div class="modal-dialog modal-dialog-scrollable modal-xl m-5 p-5">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
            <div class="modal-header " style="background: rgb(32, 35, 37);">
                <h5 class="m-3 text-uppercase text-light">all comments</h5>
                <button type="button" class="close text-dark bg-none" data-dismiss="modal"
                    aria-label="Close">&times;</button>

            </div>
            <div class="modal-body" style="background: rgb(32, 35, 37); justify-content: center; overflow-x: hidden;">
                <div class="card p-0 m-0">

                    <div class="row mt-3">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="p-2">
                                <table class="table" style="table-layout: fixed;">
                                    
                                    {% for comt in cmt %}
                                    <tbody>
                                        <tr class="text-center">
                                            <!-- <td><input type="text" value="{{ comt.comments }}" style="width: 100%;height: 20px;"></td> -->
                                            <td>{{forloop.counter}}</td>
                                            <td>{{ comt.comment }}
                                            </td>
                                            <td> <a class="text-warning" href="{% url 'delete_vendor_credit_comment' comt.id %}"><i class="fa fa-trash" aria-hidden="true"></i></a></td>
                                        </tr>
                                    </tbody>
                                    {% endfor %}
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>
</div>




<!-- .....................................................................................................        -->
      


</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
<script>
    // Add click event listener to all rows with class "clickable-row"
    const rows = document.querySelectorAll('.clickable-row');
    rows.forEach(row => {
        row.addEventListener('click', () => {
            // Get the URL from the "data-href" attribute
            const url = row.getAttribute('data-href');
            // Navigate to the URL
            window.location.href = url;
        });
    });
</script>

<script>
    var $rows = $('#table tr');
    $('#search').keyup(function () {
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

        $rows.hide().filter(function () {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return ~text.indexOf(val);
        }).show();
    });

</script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>



{% endblock %}